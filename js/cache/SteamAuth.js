!function(){var e=window.__GRN;window[e].ready(function(){window[e].SteamAuth=function(){var t=0,n=[],o=!1,i=function(t){window[e].awaitModulePrepared("Debug",function(){window[e].Debug.writeConsoleMessage("Running onAuthenticated callbacks","SteamAuth",window[e].Debug.LOG_LEVEL_INFO)});for(var o=0,i=n.length;o<i;o++)window[e].handleRunCallback(n[o])},a=function(t){window[e].awaitModulePrepared("Debug",function(t){window[e].Debug.writeConsoleMessage("User profile data was unable to be fetched!","SteamAuth",window[e].Debug.LOG_LEVEL_ERROR),window[e].Debug.writeConsoleObject(t,"SteamAuth",window[e].Debug.LOG_LEVEL_ERROR)}.bind(this,t))},r=function(){window[e].awaitModulePrepared("Debug",function(){window[e].Debug.writeConsoleMessage("User is not currently authenticated","SteamAuth",window[e].Debug.LOG_LEVEL_INFO)}),document.querySelector("body>nav .steamAuth").classList.remove("loading"),window[e].awaitModulePrepared("Debug",function(){window[e].Debug.writeConsoleMessage("Bound interactions for nav button for authentication","SteamAuth",window[e].Debug.LOG_LEVEL_INFO)})},d=function(){window.localStorage.setItem("OAAGGS64",Date.now()+6048e5+":"+t),function(){t||r(),window[e].awaitModulePrepared("Debug",function(){window[e].Debug.writeConsoleMessage("User is currently authenticated","SteamAuth",window[e].Debug.LOG_LEVEL_INFO)}),o=!0;var n=window.localStorage.getItem("OAAGGSUP");if(n){var d=n.split(":");d.splice(0,1)<Date.now()&&i(d.join(":"))}window.fetch("https://cors.io?https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=0FA551D64997BEF92A8FC8CBB1ECBA2B&steamids=76561198001344723",{cache:"default"}).then(function(e){e.text().then(function(e){var n="string"==typeof e?JSON.parse(e):e;if(n.response&&n.response.players){for(var o=0,r=n.response.players.length,d=!1;o<r;o++)if(n.response.players[o].steamid&&n.response.players[o].steamid===t){e=JSON.stringify(n.response.players[o]),d=!0;break}if(!d)return void a(new Error("Player data not verified in response!"))}window.localStorage.setItem("OAAGGSUP",Date.now()+6048e5+":"+e),i(e)}).catch(a)}).catch(a)}()};return{__init:function(){window[e].awaitModulePrepared("URL",function(){document.getElementById("steamAuth").setAttribute("href","https://steamcommunity.com/openid/login?openid.claimed_id="+encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select")+"&openid.identity="+encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select")+"&openid.mode="+encodeURIComponent("checkid_setup")+"&openid.ns="+encodeURIComponent("http://specs.openid.net/auth/2.0")+"&openid.realm="+encodeURIComponent(window.location.origin)+"&openid.return_to="+encodeURIComponent(window.location.origin+window.location.pathname));try{var n=window.localStorage.getItem("OAAGGS64");if(!n||!n.indexOf(":")>-1){var o=window[e].URL.searchParamValue("openid.identity");o&&(o=o.replace(/^https:\/\/steamcommunity.com\/openid\/id\//,""))?(t=o,d()):r()}else{var i=n.split(":");i[0]<Date.now()?(t=i[1],r()):d()}}catch(e){}})}.bind(this),registerOnAuthenticatedCallback:function(t){o?window[e].handleRunCallback(t):n.push(t)}.bind(this),get currentUserSteam32(){return t-76561197960265730},get currentUserSteam64(){return t}}}(),window[e].modulePrepared("SteamAuth"),window[e].moduleReady(window[e].SteamAuth.__init)})}();
//# sourceMappingURL=SteamAuth.js.map
